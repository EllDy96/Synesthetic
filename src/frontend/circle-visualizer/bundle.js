(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('web-audio-beat-detector-broker')) :
	typeof define === 'function' && define.amd ? define(['exports', 'web-audio-beat-detector-broker'], factory) :
	(global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.webAudioBeatDetector = {}, global.webAudioBeatDetectorBroker));
}(this, (function (exports, webAudioBeatDetectorBroker) { 'use strict';

	// This is the minified and stringified code of the web-audio-beat-detector-worker package.
	var worker = "!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=1)}([function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},function(e,t,r){\"use strict\";r.r(t);r(2)},function(e,t,r){!function(e){\"use strict\";function t(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var r=t(e),n=function(e){var t=[];return e.forEach((function(r,n){for(var o=Math.min(e.length-n,10),a=function(o){var a=e[n+o]-r;t.some((function(e){return e.interval===a&&(e.peaks.push(r),!0)}))||t.push({interval:a,peaks:[r]})},u=1;u<o;u+=1)a(u)})),t},o=function(e){for(var t=0,r=e.length,n=0;n<r;n+=1)e[n]>t&&(t=e[n]);return t},a=function(e,t,r){for(var n=e.length,o=[],a=!1,u=0;u<n;u+=1)e[u]>t?a=!0:a&&(a=!1,o.push(u-1),u+=r/4-1);return a&&o.push(n-1),o},u=function(e,t){var n,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=Math.max(0,null!==(n=a.minTempo)&&void 0!==n?n:90),i=Math.max(0,null!==(o=a.maxTempo)&&void 0!==o?o:180),s=[];return e.forEach((function(e){for(var n=60/(e.interval/t);n<u;)n*=2;for(;n>i;)n/=2;var o=!1,a=e.peaks.length;s.forEach((function(t){if(t.tempo===n&&(t.score+=e.peaks.length,t.peaks=[].concat(r.default(t.peaks),r.default(e.peaks)),o=!0),t.tempo>n-.5&&t.tempo<n+.5){var u=2*Math.abs(t.tempo-n);a+=(1-u)*t.peaks.length,t.score+=(1-u)*e.peaks.length}})),o||s.push({peaks:e.peaks,score:a,tempo:n})})),s},i=30,s=function(e,t,r){var s=o(e),f=.3*s,c=[],l=s-.05*s;if(s>.25)for(;c.length<i&&l>=f;)c=a(e,l,t),l-=.05*s;var p=n(c),d=u(p,t,r);return d.sort((function(e,t){return t.score-e.score})),d},f=function(e,t,r){var n=s(e,t,r);if(0===n.length)throw new Error(\"The given channelData does not contain any detectable beats.\");return n[0].tempo},c=function(e,t,r){var n=s(e,t,r);if(0===n.length)throw new Error(\"The given channelData does not contain any detectable beats.\");var o=n[0],a=o.peaks,u=o.tempo,i=Math.round(u),f=60/i;a.sort((function(e,t){return e-t}));for(var c=a[0]/t;c>f;)c-=f;return{bpm:i,offset:c}};addEventListener(\"message\",(function(e){var t=e.data;try{if(\"analyze\"===t.method){var r=t.id,n=t.params,o=n.channelData,a=n.sampleRate,u=n.tempoSettings,i=f(o,a,u);postMessage({error:null,id:r,result:{tempo:i}})}else{if(\"guess\"!==t.method)throw new Error('The given method \"'.concat(t.method,'\" is not supported'));var s=t.id,l=t.params,p=l.channelData,d=l.sampleRate,m=l.tempoSettings,h=c(p,d,m),v=h.bpm,g=h.offset;postMessage({error:null,id:s,result:{bpm:v,offset:g}})}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))}(r(3))},function(e,t,r){var n=r(4),o=r(5),a=r(6),u=r(7);e.exports=function(e){return n(e)||o(e)||a(e)||u()}},function(e,t,r){var n=r(0);e.exports=function(e){if(Array.isArray(e))return n(e)}},function(e,t){e.exports=function(e){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t,r){var n=r(0);e.exports=function(e,t){if(e){if(\"string\"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===r&&e.constructor&&(r=e.constructor.name),\"Map\"===r||\"Set\"===r?Array.from(e):\"Arguments\"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}},function(e,t){e.exports=function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}}]);"; // tslint:disable-line:max-line-length

	var blob = new Blob([worker], {
	  type: 'application/javascript; charset=utf-8'
	});
	var url = URL.createObjectURL(blob);
	var webAudioBeatDetector = webAudioBeatDetectorBroker.load(url);
	var analyze = webAudioBeatDetector.analyze;
	var guess = webAudioBeatDetector.guess;
	URL.revokeObjectURL(url);

	exports.analyze = analyze;
	exports.guess = guess;

	Object.defineProperty(exports, '__esModule', { value: true });

	console.log('hereeee')

})));
